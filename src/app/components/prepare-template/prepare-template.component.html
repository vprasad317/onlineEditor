<div class="row">
    <div class="col-2 pt-3 border-right sidebar-wrapper bg-light">
        <h4 class="h4">Template <small class="text-muted">Generator</small></h4>

        <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action active" aria-current="true">
              Controls
            </a>
            <li class="list-group-item list-group-item-action" [draggable]
                        [dragClass]="'active'" [dragData]="control" [dragEnabled]="true"
                        *ngFor="let control of draggableItem">{{control.name}}</li>
          </div>
    </div>
    <div class="col-10 pt-3">
        <div class="d-flex justify-content-center">
          <input type="text" class="form-control col-3" placeholder="Enter Template Name Eg: T1" [formControl]="templateNameCtrl"/>
          <button type="button" class="btn btn-primary ml-3" (click)="loadTemplate(templateNameCtrl.value)">Load Template</button>
        </div>
        <div class="card mt-3" droppable [dragOverClass]="'drag-target-border'"
        [dragHintClass]="'drag-hint'" (onDrop)="onControlDrop($event)">
            <div class="card-header">
              Drop the controls here
            </div>
            <div class="card-body drop-control">
                <li class="list-group-item" *ngFor="let item of droppedItems">
                  <quill-editor *ngIf="item.type == 'rich-text'" [(ngModel)]="htmlContent">
                    <div quill-editor-toolbar>
                      <span class="ql-formats">
                        <button class="ql-bold" [title]="'Bold'"></button>
                        <button class="ql-italic" [title]="'Italic'"></button>
                        <button class="ql-underline" [title]="'Underline'"></button>
                      </span>
                    </div>
                  </quill-editor>
                  <div class="img-holder text-center mx-auto" *ngIf="item.type == 'image'">
                  <img src="{{item.url}}" class="img-thumbnail rounded" />
                </div>
                </li>
            </div>
          </div>
          <div class="d-flex mt-3">
            <div class="ml-auto">
              <button type="button" class="btn btn-primary" (click)="saveTemplate()">Save</button>
            </div>
          </div>
    </div>
</div>


<div class="modal" [ngClass]="enablePopup ? 'd-block' : 'd-none'">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Browse Image to Upload</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="enablePopup = false">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="text-info">Upload JPG or PNG files</p>
        <input type='file' (change)="onSelectFile($event)" *ngIf="draggedElement?.type == 'image'">
        <div class="info-msg">
          <p class="text-danger" *ngIf="!loading && !validFile">Invalid file format</p>
          <p class="text-success" *ngIf="loading">Uploading File</p>
        </div>
      </div>
      
    </div>
  </div>
</div>

<app-toast-message [showToast]="showToast"></app-toast-message>

<app-toast-message [noData]="noData"></app-toast-message>
